表关系

outsource_mark_word

词表的列表，定义词表的表名称/环境等。通过表名称可以在CDN中拿到这个已上传词表中的所有词

| id   | name    | search_interface | environment | create_time         | status | is_deleted | operator  | type | result_count |
| ---- | ------- | ---------------- | ----------- | ------------------- | ------ | ---------- | --------- | ---- | ------------ |
| 1    | 词表001 | /global/v5.2     | online      | 2017-08-11 14:44:26 | 4      | 0          | 100017436 | 1    | 0            |

outsource_precision_mark_word_list。对于某一个词表进行抽取，拿到这个此表中每一个词的搜索结果所属的分类情况，一个裂变成多个(根据className的不同)

| id   | markword_id | word     | create_time         | pv   | class_name  |
| ---- | ----------- | -------- | ------------------- | ---- | ----------- |
| 1    | 121         | 小猪佩奇 | 2018-10-10 13:24:21 | 1    | video.video |
| 2    | 121         | 蜘蛛侠   | 2018-10-10 13:24:21 | 5    | app         |
| 3    | 121         | 吴亦凡   | 2018-10-10 13:24:21 | 1    | baike       |

outsource_precision_mark_word_extranct_list。从outsource_precision_mark_word_list中所有的词中，(按照原始pv数作为权重)随机抽取某一个词表的某一个分类下面一定数量的词进入这个表，作为标注的目标词。这里的pv表示抽取出来的词pv。

| id   | word     | markword_id | class_name  | mark_time           | lock_time     | operator  | status | is_deleted | verify_status | verify_lock_time | verify_time | verifier | verify_info_id | pv   | score_verify_status |      |
| ---- | -------- | ----------- | ----------- | ------------------- | ------------- | --------- | ------ | ---------- | ------------- | ---------------- | ----------- | -------- | -------------- | ---- | ------------------- | ---- |
| 25   | 蜘蛛侠   | 121         | app         | 2018-10-11 09:55:39 | 1539222531687 | 100016273 | 2      | 0          | 1             | 0                |             |          | 0              | 2    | 0                   |      |
| 26   | 蜘蛛侠   | 121         | video.video | 2018-10-11 10:01:03 | 1539223194084 | 100016273 | 2      | 1          | 1             | 0                |             |          | 0              | 1    | 0                   |      |
| 27   | 小猪佩奇 | 121         | video.video | 2018-10-11 10:47:27 | 1539226032737 | 100016273 | 2      | 1          | 1             | 0                |             |          | 0              | 1    | 0                   |      |
| 28   | 蜘蛛侠   | 121         | video.video | 2018-10-11 11:21:12 | 1539227684093 | 100016273 | 2      | 1          | 1             | 0                |             |          | 0              | 5    | 0                   |      |
| 29   | 广场舞   | 121         | video.video | 2018-10-11 11:40:56 | 1539228970394 | 100016273 | 2      | 1          | 1             | 0                |             |          | 0              | 2    | 0                   |      |
| 30   | 小猪佩奇 | 121         | video.video | 2018-10-11 13:04:08 | 1539234141465 | 100016273 | 2      | 1          | 1             | 0                |             |          | 0              | 1    | 0                   |      |
| 31   | 蜘蛛侠   | 121         | video.video | 2018-10-11 13:16:04 | 1539234887217 | 100016273 | 2      | 1          | 1             | 0                |             |          | 0              | 5    | 0                   |      |

这个词表很大，其中关键的信息是，lock_time和verify_lock_time这两个字段是数据库加锁字段，通过数据库防止同一个词在算时间内被多个人标注。例如，标注过程：

- 首先找出当前未被标注的，且记录的条目分配给本人的进行标注
- 其次找出当前未被标注的，且记录条目分配给了他人的。这个时候要求lock_time时间早于当前之前5min(加锁时间)。找到条目之后，更新加锁时间，更新分配给的操作人。【这种方式假设一个词分配给某个人之后的5min仍然没有标注的话，就可以分配给他人标注了】